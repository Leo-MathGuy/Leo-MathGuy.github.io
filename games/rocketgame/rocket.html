<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
</head>
<body>
    <canvas id="myCanvas" width="800" height="600" style="border: 1px solid black;"></canvas>
</body>
<script>
    let canvas = document.getElementById("myCanvas");

    /** @type {CanvasRenderingContext2D} */
    let ctx = canvas.getContext("2d");

    let lastRender = Date.now();
    let scene = "mainmenu"
    function render() {
        let delta = Date.now() - lastRender;
        ctx.clearRect(0,0,800,600);
        if (scene = "mainmenu") {
            draw_main_menu();
        }

        requestAnimationFrame(render);
    }

    checkHover = {};

    class Button {
        constructor(x, y, w, h, c, hc, name) {
            this.x = x;
            this.y = y;
            this.width = w;
            this.height = h;
            this.color = c;
            this.hovercolor = hc
            this.hover = false;
            this.name = name
            checkHover[this.name] = false;
        }

        draw() {
            ctx.fillStyle = this.curcolor;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }

        checkHover() {
            this.hover = checkHover[this.name]
            if (this.hover) {
                this.curcolor = this.hovercolor;
            } else {
                this.curcolor = this.color;
            }
        }
    }
    document.onmousemove = updateHovers;

    function updateHovers(event) {
        Object.entries(updateHovers).forEach(([key, value]) => {
            var cursorBelower = event.pageY <= value.y;
            var cursorLefter = event.pageX <= value.x+value.width;
            var cursorUpper = event.pageY >= value.y+value.height;
            var cursorRighter = event.pageX >= value.x;
            updateHovers[key] = cursorBelower && cursorLefter && cursorRighter && cursorUpper;
        });
    }

    // Draw main menu
    var startButton;
    function init_main_menu() {
        startButton = new Button(250, 225, 300, 150, "#FF0000", "#AA0000", "start");
    }
    init_main_menu();
    function draw_main_menu() {
        startButton.checkHover();
        startButton.draw();
    }


    render();
</script>
</html>