<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
</head>
<body>
    <canvas id="myCanvas" width="800" height="600" style="border: 1px solid black;"></canvas>
</body>
<script>
    let canvas = document.getElementById("myCanvas");

    /** @type {CanvasRenderingContext2D} */
    let ctx = canvas.getContext("2d");

    let lastRender = Date.now();
    let scene = "mainmenu"
    function render() {
        let delta = Date.now() - lastRender;
        ctx.clearRect(0,0,800,600);
        if (scene = "mainmenu") {
            draw_main_menu();
        }

        requestAnimationFrame(render);
    }

    checkHover = {};

    class Button {
        constructor(x, y, w, h, c, hc, name) {
            this.x = x;
            this.y = y;
            this.width = w;
            this.height = h;
            this.color = c;
            this.hovercolor = hc
            this.hover = false;
            this.name = name
            checkHover[this.name] = {y:this.y, x:this.x, width:this.width, height:this.height, hover:this.hover};
        }

        draw() {
            ctx.fillStyle = this.curcolor;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }

        checkHover() {
            this.hover = checkHover[this.name].hover;
            if (this.hover) {
                this.curcolor = this.hovercolor;
            } else {
                this.curcolor = this.color;
            }
        }
    }

    class TextCanvas {
        constructor(x, y, style, text) {
            this.x = x;
            this.y = y;
            this.style = style;
            this.text = text;
        }

        draw() {
            ctx.fillStyle = this.style;
            ctx.fillText(this.text, this.x, this.y);
        }
    }

    document.onmousemove = updateHovers;

    function updateHovers(event) {
        Object.entries(checkHover).forEach(([key, value]) => {
            var isRighter = event.pageX >= value.x;
            var isLefter = event.pageX <= (value.x+value.width);
            var isBottomer = event.pageY >= value.y;
            var isUpper = event.pageY <= (value.y+value.height);
            checkHover[key].hover = isBottomer && isLefter && isRighter && isUpper;
        });
    }

    // Draw main menu
    var startButton = new Button(275, 225, 250, 150, "#FF0000", "#AA0000", "start");
    var startButtonText = new TextCanvas(275, 250, "20pt Roboto", "Start Game");

    function draw_main_menu() {
        startButton.checkHover();
        startButton.draw();
        startButtonText.draw();
    }


    render();
</script>
</html>